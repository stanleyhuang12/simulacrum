    
from openai import OpenAI 
from openai.helpers import LocalAudioPlayer
import asyncio
client = OpenAI()  

audio=client.audio.speech.create(
                                input="Hello, my name is Representative James.",
                                model="gpt-4o-mini-tts",
                                voice="alloy",
                                instructions="You are a lawmaker.",
                                response_format="wav",
                                
                                )


async def text_to_audio(text, tone_and_style_instructions):
  async with client.audio.speech.with_streaming_response.create(
    model="gpt-4o-mini-tts",
    voice="coral",
    input=text,
    instructions=tone_and_style_instructions,
    response_format="pcm",
  ) as response:
    await LocalAudioPlayer().play(response)
    
res = text_to_audio("Hello, my name is Stanley and I am so excited to be here.", tone_and_style_instructions="Be professional and courteous.")
if __name__ == "__main__":
  asyncio.run(text_to_audio("Hello world!", "Enthusiastic voice."))